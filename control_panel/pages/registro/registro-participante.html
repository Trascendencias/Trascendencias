<html> 

	<head>		
		<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title> Registro de Participante </title>
		<% include menu.html %>
		<meta charset="UTF-8">
		<link rel="stylesheet" type="text/css" href="resources/style.css">
    </head>
<body>
		
        <div class="body">
		<br>
		<center><h6><b> Registro de Participante </b></h6> </center>
			
			<form class="registro" id="forma-registro" method="post" action="registro "> <br><br>
               
                <!--- TIPO DE REGISTRO --> 
                <input type="hidden" name="registrado" value="participante">
                
				<!-- NOMBRE/TITULO TODOS-->
				<input maxlength="50" type="text" placeholder="Nombre" name="name" required>
				<p class="error"> *Debe llenar esta información </p>

                <!-- TALLA Participantes -->
                <select id="select" name="shirt_size" required>
                  <option value="none" disabled selected> Talla... </option>
                  <option value="XS"> XS </option>
                  <option value="S"> S </option>
                  <option value="M"> M </option>
                  <option value="L"> L </option>
                  <option value="XL"> XL </option>
                </select>
                <p class="error"> *Debe llenar esta información </p>
                
                <!-- TELEFONO Participantes, Conferencias, Visita,Taller, Evento Social, Patrocinadores -->
				<input onKeyPress="return isNumberKey(event)" maxlength="10" type="text" placeholder="Teléfono" name="phone" required>
				<p class="error"> *Debe llenar esta información </p>
                
				<!-- CORREO Participantes, Conferencias, Visita, Taller, Evento Social, Patrocinadores -->
				<input maxlength="50" type="email" placeholder="Correo" name="email" required>
				<p class="error"> *Debe llenar esta información </p>

				<!-- INSTITUCION DE PROCEDENCIA Participante-->
				<input maxlength="50" type="text" placeholder="Institución de procedencia" name="institution" required>
				<p class="error"> *Debe llenar esta información </p>

				<!-- CIUDAD Participante-->
				<input maxlength="50" type="text" placeholder="Ciudad" name="city" required>
				<p class="error"> *Debe llenar esta información </p>

				<!-- CONTRASENA Participante-->
				<input maxlength="50" type="password" placeholder="Contraseña" name="password" required>
				<p class="error"> *Debe llenar esta información </p>

				<!-- REPITE LA CONTRASENA Participante-->
				<input maxlength="50" type="password" placeholder="Repita la contraseña" name="password2" required>
				<p class="error"> *Debe llenar esta información </p>
                
                <!-- ALERGIAS Participante-->
				<input maxlength="50" type="text" placeholder="¿Tienes alergias?" name="alergies" required>
				<p class="error"> *Debe llenar esta información </p>
                
                <!-- PAQUETE ELEGIDO Participante -->
                <select id="select" name="package" required>
                  <option value="none" selected disabled>Paquete Elegido... </option>
                  <option value="volvo">Paquete 1</option>
                  <option value="saab">Paquete 2</option>
                  <option value="mercedes">Paquete 3</option>
                  <option value="audi">Paquete 4</option>
                </select>
				<p class="error"> *Debe llenar esta información </p>
                 
                 <!-- CODIGO DE GRUPO -->
				<input id="codigo-grupo" maxlength="50" type="text" placeholder="Código de Grupo" name="group_code" required>
				<button type="button" id="codigo-grupo-btn" class="third codigo-grupo" onClick="codigoGrupo();"> Nuevo </button>
				<p class="error"> *Debe llenar esta información </p>
                <input type="hidden" name="codigo-generado" id="codigo-generado" value="false">

                <!-- ABONO Participante, Patrocinadores-->
                <p class="title"> Abono: </p>
                <input type=number name="abono" class="numero" required>
                <p class="error"> *Debe llenar esta información </p>
                
               
                <div class="spacer"></div>
                <hr>
				<button type="submit" class="submit" > Siguiente </button>
                <button type="button" class="third" onClick="window.history.back();"> Cancelar </button>
                <div class="spacer"></div>
                <div class="spacer"></div>
                <div class="spacer"></div>
			
			</form>
		</div>

</body>
		
		<script>
			function activate(elem){ //ACTIVE, PARA EL MENU MOVIL
				if(elem.classList.contains('active')) elem.classList.remove('active'); 
				else elem.classList.add('active'); 
			}
    
            function isNumberKey(evt){
                var charCode = (evt.which) ? evt.which : event.keyCode
                if (charCode > 31 && (charCode < 48 || charCode > 57)) return false;
                return true;
            }

            function generarClave(){
                var random;
                var claveDigits = ["E","r","r","."];
                var clave; 
                var alphaNum = ["0","1",'2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z']
                    random = getRandom(1, 60466176);
                    claveDigits[5] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    claveDigits[4] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    claveDigits[3] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    claveDigits[2] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    claveDigits[1] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    claveDigits[0] = alphaNum[random%36];
                    random = Math.floor(random/36);
                    clave = claveDigits[0] + claveDigits[1] + claveDigits[2] + claveDigits[3] + claveDigits[4] + claveDigits[5];
                return clave;

            }
            //Genera un código de grupo hasta que no se repita en la base de datos, solo lo registra en la base de datos cuando le da siguiente
            function codigoGrupo(){
                if(document.getElementById("codigo-grupo-btn").innerHTML == "Cancelar"){
                	var z = document.getElementById("codigo-grupo");
                	z.value = "";
	                document.getElementById("codigo-grupo-btn").innerHTML = "Nuevo";
	                document.getElementById("codigo-grupo").readOnly = false;
	                document.getElementById("codigo-generado").value = "false";
                }
                else {
                var z = document.getElementById("codigo-grupo");
                //Aquí va un while, pero aja
                z.value=generarClave();
                document.getElementById("codigo-grupo-btn").innerHTML = "Cancelar";
                document.getElementById("codigo-grupo").readOnly = true; }
                document.getElementById("codigo-generado").value = "true";
            }

            function getRandom(min, max) {
              min = Math.ceil(min);
              max = Math.floor(max);
              return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
            }
		</script>
</html>